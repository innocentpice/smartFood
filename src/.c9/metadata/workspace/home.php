{"filter":false,"title":"home.php","tooltip":"/home.php","undoManager":{"mark":63,"position":63,"stack":[[{"start":{"row":2,"column":2},"end":{"row":7,"column":9},"action":"remove","lines":["<head>","    <meta charset=\"utf-8\">","    <title>Restaurant</title>","    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bulma/0.4.1/css/bulma.min.css\" />","    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\" />","  </head>"],"id":2,"ignore":true},{"start":{"row":2,"column":2},"end":{"row":10,"column":9},"action":"insert","lines":["<head>","    <meta charset=\"utf-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">","    <title>Restaurant</title>","    <link href=\"https://fonts.googleapis.com/css?family=Prompt\" rel=\"stylesheet\">","    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bulma/0.4.1/css/bulma.min.css\" />","    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\" />","    <link rel=\"stylesheet\" href=\"./public/css/custom.css\" />","  </head>"]}],[{"start":{"row":11,"column":8},"end":{"row":12,"column":4},"action":"insert","lines":["","    "],"id":12}],[{"start":{"row":12,"column":4},"end":{"row":17,"column":9},"action":"insert","lines":["<style>","        body {","          background-image: url('http://wallpaper-gallery.net/images/japanese-food-wallpaper/japanese-food-wallpaper-23.jpg');","          background-size: auto;","          background-repeat: none;","        }"],"id":13}],[{"start":{"row":17,"column":9},"end":{"row":18,"column":0},"action":"insert","lines":["",""],"id":14},{"start":{"row":18,"column":0},"end":{"row":18,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":18,"column":6},"end":{"row":18,"column":8},"action":"remove","lines":["  "],"id":15}],[{"start":{"row":18,"column":4},"end":{"row":18,"column":6},"action":"remove","lines":["  "],"id":16}],[{"start":{"row":18,"column":4},"end":{"row":18,"column":5},"action":"insert","lines":["<"],"id":17}],[{"start":{"row":18,"column":5},"end":{"row":18,"column":6},"action":"insert","lines":["/"],"id":18}],[{"start":{"row":18,"column":6},"end":{"row":18,"column":7},"action":"insert","lines":["s"],"id":19}],[{"start":{"row":18,"column":7},"end":{"row":18,"column":8},"action":"insert","lines":["t"],"id":20}],[{"start":{"row":18,"column":8},"end":{"row":18,"column":9},"action":"insert","lines":["y"],"id":21}],[{"start":{"row":18,"column":9},"end":{"row":18,"column":10},"action":"insert","lines":["l"],"id":22}],[{"start":{"row":18,"column":10},"end":{"row":18,"column":11},"action":"insert","lines":["e"],"id":23}],[{"start":{"row":18,"column":11},"end":{"row":18,"column":12},"action":"insert","lines":[">"],"id":24}],[{"start":{"row":14,"column":33},"end":{"row":14,"column":123},"action":"remove","lines":["http://wallpaper-gallery.net/images/japanese-food-wallpaper/japanese-food-wallpaper-23.jpg"],"id":25},{"start":{"row":14,"column":33},"end":{"row":14,"column":123},"action":"insert","lines":["http://wallpaper-gallery.net/images/japanese-food-wallpaper/japanese-food-wallpaper-21.jpg"]}],[{"start":{"row":12,"column":0},"end":{"row":18,"column":12},"action":"remove","lines":["    <style>","        body {","          background-image: url('http://wallpaper-gallery.net/images/japanese-food-wallpaper/japanese-food-wallpaper-21.jpg');","          background-size: auto;","          background-repeat: none;","        }","    </style>"],"id":27}],[{"start":{"row":11,"column":8},"end":{"row":12,"column":0},"action":"remove","lines":["",""],"id":28}],[{"start":{"row":9,"column":60},"end":{"row":10,"column":0},"action":"insert","lines":["",""],"id":29},{"start":{"row":10,"column":0},"end":{"row":10,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":10,"column":4},"end":{"row":16,"column":14},"action":"insert","lines":["<style>","        body {","          background-image: url('http://wallpaper-gallery.net/images/japanese-food-wallpaper/japanese-food-wallpaper-23.jpg');","          background-size: auto;","          background-repeat: no-repeat;","        }","      </style>"],"id":30}],[{"start":{"row":0,"column":0},"end":{"row":92,"column":7},"action":"remove","lines":["<!DOCTYPE html>","<html>","  <head>","    <meta charset=\"utf-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">","    <title>Restaurant</title>","    <link href=\"https://fonts.googleapis.com/css?family=Prompt\" rel=\"stylesheet\">","    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bulma/0.4.1/css/bulma.min.css\" />","    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\" />","    <link rel=\"stylesheet\" href=\"./public/css/custom.css\" />","    <style>","        body {","          background-image: url('http://wallpaper-gallery.net/images/japanese-food-wallpaper/japanese-food-wallpaper-23.jpg');","          background-size: auto;","          background-repeat: no-repeat;","        }","      </style>","  </head>","  <body>","      <nav class=\"nav has-shadow\">","        <div class=\"container\">","            <div class=\"nav-left\">","              <a class=\"nav-item\">","                <a class=\"nav-item is-tab is-hidden-mobile\">Smart Reataurant</a>","              </a>","              <a class=\"nav-item is-tab is-hidden-mobile\">อาหารจานหลัก</a>","              <a class=\"nav-item is-tab is-hidden-mobile\">ของหวาน</a>","              <a class=\"nav-item is-tab is-hidden-mobile\">เครื่องดื่ม</a>","            </div>","            <div class=\"nav-center\">","              <a class=\"nav-item\">","                <a class=\"nav-item is-tab is-hidden-mobile\">รายการที่สั่งซื้อ</a>","              </a>","            </div>","            <span class=\"nav-toggle\">","              <span></span>","              <span></span>","              <span></span>","            </span>","            <div class=\"nav-right nav-menu\">","              <a class=\"nav-item is-tab\">Log out</a>","            </div>","         </div>","        </nav>","<div class=\"container\" style=\"padding-top:3em;\">","    <div class=\"tile is-ancestor\">","      <div class=\"tile is-vertical is-8\">","        <div class=\"tile\">","          <div class=\"tile is-parent is-vertical\">","            <article class=\"tile is-child notification is-primary\">","              <p class=\"title\">Vertical...</p>","              <p class=\"subtitle\">Top tile</p>","            </article>","            <article class=\"tile is-child notification is-warning\">","              <p class=\"title\">...tiles</p>","              <p class=\"subtitle\">Bottom tile</p>","            </article>","          </div>","          <div class=\"tile is-parent\">","            <article class=\"tile is-child notification is-info\">","              <p class=\"title\">Middle tile</p>","              <p class=\"subtitle\">With an image</p>","              <figure class=\"image is-4by3\">","                <img src=\"http://bulma.io/images/placeholders/640x480.png\">","              </figure>","            </article>","          </div>","        </div>","        <div class=\"tile is-parent\">","          <article class=\"tile is-child notification is-danger\">","            <p class=\"title\">Wide tile</p>","            <p class=\"subtitle\">Aligned with the right tile</p>","            <div class=\"content\">","              <!-- Content -->","            </div>","          </article>","        </div>","      </div>","      <div class=\"tile is-parent\">","        <article class=\"tile is-child notification is-success\">","          <div class=\"content\">","            <p class=\"title\">Tall tile</p>","            <p class=\"subtitle\">With even more content</p>","            <div class=\"content\">","              <!-- Content -->","            </div>","          </div>","        </article>","      </div>","    </div>","</div>","  </body>","</html>"],"id":246},{"start":{"row":0,"column":0},"end":{"row":124,"column":7},"action":"insert","lines":["<?php ","  session_start();","  require('./config.php');","  ","  $sql = \"SELECT order_recript.*, receipt.*, food.title ,food.price as fprice, order_recript.id as order_id, receipt.status as b_status  \"","        .\"FROM order_recript \"","        .\"INNER JOIN food ON order_recript.foodID = food.id \"","        .\"INNER JOIN receipt ON order_recript.r_id = receipt.id \"","        .\"WHERE receipt.status <= 1 \"","        .\"ORDER BY receipt.status DESC, receipt.id ASC\";","  $sth = $database->prepare($sql);","  $sth->execute();","  $tasks = $sth->fetchAll();","?>","","<!DOCTYPE html>","<html>","  <head>","    <meta charset=\"utf-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">","    <title>Restaurant</title>","    <link href=\"https://fonts.googleapis.com/css?family=Prompt\" rel=\"stylesheet\">","    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bulma/0.4.1/css/bulma.min.css\" />","    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\" />","    <link rel=\"stylesheet\" href=\"./public/css/custom.css\" />","  </head>","  <body>","    <div class=\"column\">","        <section class=\"hero\">","            <div class=\"hero-body\">","                <div class=\"container has-text-centered\">","                    <h1 class=\"title\">Smart Restaurant</h1>","                    <h2 class=\"subtitle\">รายการที่สั่งจากลูกค้า</h2>","                </div>","            </div>","        </section>","    </div>","    <div class=\"container\">","    <?php $i=0;$d=0;$tableIndex = 'S00';foreach($tasks as $item){$i++;$d++;?>","      <?php if($tableIndex != $item['r_id']){ $tableIndex = $item['r_id'];?>  ","      <article class=\"message <?php if($item['b_status'] == 1){ echo 'is-success';}else{ echo 'is-info';}?>\" id=\"task_<?=$item['r_id']?>\">","        <div class=\"message-header\">","          <p>","            Bill NO. <?=$item['r_id']?>","            <span>","              ( โต๊ะ <?=$item['tableNum']?> )","            </span>","          </p>","        </div>","        <div class=\"message-body\">","          <table class=\"table\">","            <thead>","              <tr>","                <th>#</th>","                <th>Order NO.</th>","                <th>เมนู</th>","                <th>จำนวน</th>","                <th>ราคา</th>","                <th>รวม</th>","              </tr>","            </thead>","      <?php }?>","            <tbody>","              <tr>","                <td><?=$d?></td>","                <td><?=$item['order_id']?></td>","                <td><?=$item['title']?></td>","                <td><?=$item['foodNum']?></td>","                <td><?=$item['fprice']?></td>","                <td><?=$item['price']?></td>","              </tr>","            </tbody>","        <?php if($tasks[$i]['r_id'] != $tableIndex){$d=0;?>","            <thead>","              <tr>","                <th colspan=\"5\">ราคารวมทั้งหมด</th>","                <th><?=$item['sumary']?></th>","              </tr>","              <tr>","                <th colspan=\"5\">ส่วนลด</th>","                <th>0</th>","              </tr>","              <tr>","                <th colspan=\"5\">ราคาสุทธิ</th>","                <th><?=$item['sumary']?></th>","              </tr>","            </thead>","          </table>","          <div class=\"field is-grouped columns\">","            <p class=\"column has-text-centered\">","              <?php if($item['b_status'] == 1){ ?>","                <a href=\"#\" class=\"button is-primary is-outlined is-medium\">พิมพ์ใบเสร็จ</a>","                <button onclick=\"order_complete(<?=$item['r_id']?>);\" class=\"button is-success is-outlined is-medium\">ชำระเงิน</button>","              <?php }?>","            </p>","          </div>","        </div>","      </article>","        <?php }?>","      <?php }?>","    </div>","    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js\"></script>","    <script>","      function order_complete(id){","        if(confirm('ต้องการชำระเงิน ?') == 1){","          var url = './order_complete.php?id=' + id;","          $.ajax({","            url: url,","            context: document.body","          }).done(function(res) {","            if(res == 'success'){","              alert('ชำระเงินเรียบร้อย ขอบคุณครับ');","              $('#task_'+id).remove();","            }else{","              alert('ระบบมีปัญหา ไม่สามารถชำระเงินได้ตอนนี้');","            }","          });","        }","      }","      setInterval(()=>{","        window.location = 'http://'+window.location.hostname+'/cashier.php';","      },5000);","    </script>","  </body>","</html>"]}],[{"start":{"row":0,"column":0},"end":{"row":14,"column":0},"action":"remove","lines":["<?php ","  session_start();","  require('./config.php');","  ","  $sql = \"SELECT order_recript.*, receipt.*, food.title ,food.price as fprice, order_recript.id as order_id, receipt.status as b_status  \"","        .\"FROM order_recript \"","        .\"INNER JOIN food ON order_recript.foodID = food.id \"","        .\"INNER JOIN receipt ON order_recript.r_id = receipt.id \"","        .\"WHERE receipt.status <= 1 \"","        .\"ORDER BY receipt.status DESC, receipt.id ASC\";","  $sth = $database->prepare($sql);","  $sth->execute();","  $tasks = $sth->fetchAll();","?>",""],"id":247}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""],"id":248}],[{"start":{"row":22,"column":4},"end":{"row":107,"column":13},"action":"remove","lines":["<div class=\"container\">","    <?php $i=0;$d=0;$tableIndex = 'S00';foreach($tasks as $item){$i++;$d++;?>","      <?php if($tableIndex != $item['r_id']){ $tableIndex = $item['r_id'];?>  ","      <article class=\"message <?php if($item['b_status'] == 1){ echo 'is-success';}else{ echo 'is-info';}?>\" id=\"task_<?=$item['r_id']?>\">","        <div class=\"message-header\">","          <p>","            Bill NO. <?=$item['r_id']?>","            <span>","              ( โต๊ะ <?=$item['tableNum']?> )","            </span>","          </p>","        </div>","        <div class=\"message-body\">","          <table class=\"table\">","            <thead>","              <tr>","                <th>#</th>","                <th>Order NO.</th>","                <th>เมนู</th>","                <th>จำนวน</th>","                <th>ราคา</th>","                <th>รวม</th>","              </tr>","            </thead>","      <?php }?>","            <tbody>","              <tr>","                <td><?=$d?></td>","                <td><?=$item['order_id']?></td>","                <td><?=$item['title']?></td>","                <td><?=$item['foodNum']?></td>","                <td><?=$item['fprice']?></td>","                <td><?=$item['price']?></td>","              </tr>","            </tbody>","        <?php if($tasks[$i]['r_id'] != $tableIndex){$d=0;?>","            <thead>","              <tr>","                <th colspan=\"5\">ราคารวมทั้งหมด</th>","                <th><?=$item['sumary']?></th>","              </tr>","              <tr>","                <th colspan=\"5\">ส่วนลด</th>","                <th>0</th>","              </tr>","              <tr>","                <th colspan=\"5\">ราคาสุทธิ</th>","                <th><?=$item['sumary']?></th>","              </tr>","            </thead>","          </table>","          <div class=\"field is-grouped columns\">","            <p class=\"column has-text-centered\">","              <?php if($item['b_status'] == 1){ ?>","                <a href=\"#\" class=\"button is-primary is-outlined is-medium\">พิมพ์ใบเสร็จ</a>","                <button onclick=\"order_complete(<?=$item['r_id']?>);\" class=\"button is-success is-outlined is-medium\">ชำระเงิน</button>","              <?php }?>","            </p>","          </div>","        </div>","      </article>","        <?php }?>","      <?php }?>","    </div>","    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js\"></script>","    <script>","      function order_complete(id){","        if(confirm('ต้องการชำระเงิน ?') == 1){","          var url = './order_complete.php?id=' + id;","          $.ajax({","            url: url,","            context: document.body","          }).done(function(res) {","            if(res == 'success'){","              alert('ชำระเงินเรียบร้อย ขอบคุณครับ');","              $('#task_'+id).remove();","            }else{","              alert('ระบบมีปัญหา ไม่สามารถชำระเงินได้ตอนนี้');","            }","          });","        }","      }","      setInterval(()=>{","        window.location = 'http://'+window.location.hostname+'/cashier.php';","      },5000);","    </script>"],"id":249}],[{"start":{"row":22,"column":2},"end":{"row":22,"column":4},"action":"remove","lines":["  "],"id":250}],[{"start":{"row":22,"column":0},"end":{"row":22,"column":2},"action":"remove","lines":["  "],"id":251}],[{"start":{"row":21,"column":10},"end":{"row":22,"column":0},"action":"remove","lines":["",""],"id":252}],[{"start":{"row":17,"column":56},"end":{"row":17,"column":57},"action":"remove","lines":["ก"],"id":253}],[{"start":{"row":17,"column":55},"end":{"row":17,"column":56},"action":"remove","lines":["า"],"id":254}],[{"start":{"row":17,"column":54},"end":{"row":17,"column":55},"action":"remove","lines":["จ"],"id":255}],[{"start":{"row":17,"column":56},"end":{"row":17,"column":57},"action":"remove","lines":["ก"],"id":256}],[{"start":{"row":17,"column":55},"end":{"row":17,"column":56},"action":"remove","lines":["ู"],"id":257}],[{"start":{"row":17,"column":54},"end":{"row":17,"column":55},"action":"remove","lines":["ล"],"id":258}],[{"start":{"row":17,"column":53},"end":{"row":17,"column":54},"action":"remove","lines":["ง"],"id":259}],[{"start":{"row":17,"column":53},"end":{"row":17,"column":54},"action":"remove","lines":["ค"],"id":260}],[{"start":{"row":17,"column":52},"end":{"row":17,"column":53},"action":"remove","lines":["่"],"id":261}],[{"start":{"row":17,"column":51},"end":{"row":17,"column":52},"action":"remove","lines":["ั"],"id":262}],[{"start":{"row":17,"column":51},"end":{"row":17,"column":52},"action":"remove","lines":["้"],"id":263}],[{"start":{"row":17,"column":50},"end":{"row":17,"column":51},"action":"remove","lines":["ส"],"id":264}],[{"start":{"row":17,"column":49},"end":{"row":17,"column":50},"action":"remove","lines":["่"],"id":265}],[{"start":{"row":17,"column":48},"end":{"row":17,"column":49},"action":"remove","lines":["ี"],"id":266}],[{"start":{"row":17,"column":47},"end":{"row":17,"column":48},"action":"remove","lines":["ท"],"id":267}],[{"start":{"row":17,"column":46},"end":{"row":17,"column":47},"action":"remove","lines":["ร"],"id":268}],[{"start":{"row":17,"column":46},"end":{"row":17,"column":47},"action":"remove","lines":["า"],"id":269}],[{"start":{"row":17,"column":45},"end":{"row":17,"column":46},"action":"remove","lines":["า"],"id":270}],[{"start":{"row":17,"column":44},"end":{"row":17,"column":45},"action":"remove","lines":["ก"],"id":271}],[{"start":{"row":17,"column":43},"end":{"row":17,"column":44},"action":"remove","lines":["ย"],"id":272}],[{"start":{"row":17,"column":42},"end":{"row":17,"column":43},"action":"remove","lines":["า"],"id":273}],[{"start":{"row":17,"column":41},"end":{"row":17,"column":42},"action":"remove","lines":["ร"],"id":274}],[{"start":{"row":17,"column":41},"end":{"row":17,"column":42},"action":"insert","lines":["."],"id":275}],[{"start":{"row":17,"column":41},"end":{"row":17,"column":42},"action":"remove","lines":["."],"id":276}],[{"start":{"row":17,"column":41},"end":{"row":17,"column":42},"action":"insert","lines":["ใ"],"id":277}],[{"start":{"row":17,"column":42},"end":{"row":17,"column":43},"action":"insert","lines":["บ"],"id":278}],[{"start":{"row":17,"column":43},"end":{"row":17,"column":44},"action":"insert","lines":["เ"],"id":279}],[{"start":{"row":17,"column":44},"end":{"row":17,"column":45},"action":"insert","lines":["ส"],"id":280}],[{"start":{"row":17,"column":45},"end":{"row":17,"column":46},"action":"insert","lines":["ร"],"id":281}],[{"start":{"row":17,"column":46},"end":{"row":17,"column":47},"action":"insert","lines":["็"],"id":282}],[{"start":{"row":17,"column":47},"end":{"row":17,"column":48},"action":"insert","lines":["จ"],"id":283}],[{"start":{"row":17,"column":48},"end":{"row":17,"column":49},"action":"insert","lines":["ร"],"id":284}],[{"start":{"row":17,"column":49},"end":{"row":17,"column":50},"action":"insert","lines":["ั"],"id":285}],[{"start":{"row":17,"column":50},"end":{"row":17,"column":51},"action":"insert","lines":["บ"],"id":286}],[{"start":{"row":17,"column":51},"end":{"row":17,"column":52},"action":"insert","lines":["เ"],"id":287}],[{"start":{"row":17,"column":52},"end":{"row":17,"column":53},"action":"insert","lines":["ง"],"id":288}],[{"start":{"row":17,"column":53},"end":{"row":17,"column":54},"action":"insert","lines":["ิ"],"id":289}],[{"start":{"row":17,"column":54},"end":{"row":17,"column":55},"action":"insert","lines":["น"],"id":290}]]},"ace":{"folds":[],"scrolltop":28,"scrollleft":0,"selection":{"start":{"row":2,"column":0},"end":{"row":23,"column":7},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":1,"state":"start","mode":"ace/mode/php"}},"timestamp":1494162380470,"hash":"7442bf9aa8f14671d0797a223eb05dddee768671"}